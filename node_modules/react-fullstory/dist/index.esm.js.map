{"version":3,"file":"index.esm.js","sources":["../src/fullstory-script.js","../src/mock-fullstory-script.js","../src/index.js"],"sourcesContent":["export default () =>\n  (function(m, n, e, t, l, o, g, y) {\n    if (e in m) {\n      if (m.console && m.console.log) {\n        m.console.log(\n          'FullStory namespace conflict. Please set window[\"_fs_namespace\"].'\n        );\n      }\n      return;\n    }\n    g = m[e] = function(a, b, s) {\n      g.q ? g.q.push([a, b, s]) : g._api(a, b, s);\n    };\n    g.q = [];\n    o = n.createElement(t);\n    o.async = 1;\n    o.crossOrigin = 'anonymous';\n    o.src = 'https://' + _fs_host + '/s/fs.js';\n    y = n.getElementsByTagName(t)[0];\n    y.parentNode.insertBefore(o, y);\n    g.identify = function(i, v, s) {\n      g(l, { uid: i }, s);\n      if (v) g(l, v, s);\n    };\n    g.setUserVars = function(v, s) {\n      g(l, v, s);\n    };\n    g.event = function(i, v, s) {\n      g('event', { n: i, p: v }, s);\n    };\n    g.shutdown = function() {\n      g('rec', !1);\n    };\n    g.restart = function() {\n      g('rec', !0);\n    };\n    g.log = function(a, b) {\n      g('log', [a, b]);\n    };\n    g.consent = function(a) {\n      g('consent', !arguments.length || a);\n    };\n    g.identifyAccount = function(i, v) {\n      o = 'account';\n      v = v || {};\n      v.acctId = i;\n      g(o, v);\n    };\n    g.clearUserCookie = function() {};\n  })(window, document, window['_fs_namespace'], 'script', 'user');\n","export default () => {\n  window[window['_fs_namespace']] = {\n    identify: (...args) => ({ method: 'identify', args }),\n    setUserVars: (...args) => ({ method: 'setUserVars', args }),\n    event: (...args) => ({ method: 'event', args }),\n    shutdown: (...args) => ({ method: 'shutdown', args }),\n    restart: (...args) => ({ method: 'restart', args }),\n    log: (...args) => ({ method: 'log', args }),\n    consent: (...args) => ({ method: 'consent', args }),\n    identifyAccount: (...args) => ({ method: 'identifyAccount', args }),\n    clearUserCookie: (...args) => ({ method: 'clearUserCookie', args })\n  };\n};\n","import React from 'react';\nimport initFullStory from './fullstory-script';\nimport initMockFullStory from './mock-fullstory-script';\n\nconst canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\nconst includeFullStory =\n  process.env.NODE_ENV !== 'test' ? initFullStory : initMockFullStory;\n\nexport const getWindowFullStory = () => window[window['_fs_namespace']];\n\nexport const FullStoryAPI = (fn, ...args) => {\n  if (canUseDOM && getWindowFullStory()) {\n    return getWindowFullStory()[fn].apply(null, args);\n  }\n\n  return false;\n};\n\nexport const identify = (...args) => {\n  return FullStoryAPI('identify', ...args);\n};\n\nexport const shutdown = (...args) => {\n  return FullStoryAPI('shutdown', ...args);\n};\n\nexport const restart = (...args) => {\n  return FullStoryAPI('restart', ...args);\n};\n\nexport const setUserVars = (...args) => {\n  return FullStoryAPI('setUserVars', ...args);\n};\n\nexport const log = (...args) => {\n  return FullStoryAPI('log', ...args);\n};\n\nexport const getCurrentSessionUrl = (...args) => {\n  return FullStoryAPI('getCurrentSessionUrl', ...args);\n};\n\nexport const event = (...args) => {\n  return FullStoryAPI('event', ...args);\n};\n\nexport const consent = (...args) => {\n  return FullStoryAPI('consent', ...args);\n};\n\nexport const clearUserCookie = (...args) => {\n  return FullStoryAPI('clearUserCookie', ...args);\n};\n\nexport default class FullStory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { org, debug, host, namespace } = props;\n\n    if (!org || !canUseDOM) {\n      return;\n    }\n\n    if (!getWindowFullStory()) {\n      window['_fs_debug'] = debug || false;\n      window['_fs_host'] = host || 'fullstory.com';\n      window['_fs_org'] = org;\n      window['_fs_namespace'] = namespace || 'FS';\n\n      includeFullStory();\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    if (!canUseDOM || !getWindowFullStory()) return false;\n\n    getWindowFullStory().shutdown();\n\n    delete window[window['_fs_namespace']];\n    delete window['_fs_debug'];\n    delete window['_fs_host'];\n    delete window['_fs_org'];\n    delete window['_fs_namespace'];\n  }\n\n  render() {\n    return false;\n  }\n}\n"],"names":["m","n","e","t","l","o","g","y","console","log","a","b","s","q","push","_api","createElement","async","crossOrigin","src","_fs_host","getElementsByTagName","parentNode","insertBefore","identify","i","v","uid","setUserVars","event","p","shutdown","restart","consent","arguments","length","identifyAccount","acctId","clearUserCookie","window","document","args","method","canUseDOM","includeFullStory","process","env","NODE_ENV","initFullStory","initMockFullStory","getWindowFullStory","FullStoryAPI","fn","apply","getCurrentSessionUrl","FullStory","props","org","debug","host","namespace","React","Component"],"mappings":"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"}