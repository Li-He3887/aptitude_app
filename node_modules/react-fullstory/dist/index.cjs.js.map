{"version":3,"file":"index.cjs.js","sources":["../src/fullstory-script.js","../src/mock-fullstory-script.js","../src/index.js"],"sourcesContent":["export default () =>\n  (function(m, n, e, t, l, o, g, y) {\n    if (e in m) {\n      if (m.console && m.console.log) {\n        m.console.log(\n          'FullStory namespace conflict. Please set window[\"_fs_namespace\"].'\n        );\n      }\n      return;\n    }\n    g = m[e] = function(a, b, s) {\n      g.q ? g.q.push([a, b, s]) : g._api(a, b, s);\n    };\n    g.q = [];\n    o = n.createElement(t);\n    o.async = 1;\n    o.crossOrigin = 'anonymous';\n    o.src = 'https://' + _fs_script + '/s/fs.js';\n    y = n.getElementsByTagName(t)[0];\n    y.parentNode.insertBefore(o, y);\n    g.identify = function(i, v, s) {\n      g(l, { uid: i }, s);\n      if (v) g(l, v, s);\n    };\n    g.setUserVars = function(v, s) {\n      g(l, v, s);\n    };\n    g.event = function(i, v, s) {\n      g('event', { n: i, p: v }, s);\n    };\n    g.shutdown = function() {\n      g('rec', !1);\n    };\n    g.restart = function() {\n      g('rec', !0);\n    };\n    g.log = function(a, b) {\n      g('log', [a, b]);\n    };\n    g.consent = function(a) {\n      g('consent', !arguments.length || a);\n    };\n    g.identifyAccount = function(i, v) {\n      o = 'account';\n      v = v || {};\n      v.acctId = i;\n      g(o, v);\n    };\n    g.clearUserCookie = function() {};\n    g._w = {};\n    y = 'XMLHttpRequest';\n    g._w[y] = m[y];\n    y = 'fetch';\n    g._w[y] = m[y];\n    if (m[y])\n      m[y] = function() {\n        return g._w[y].apply(this, arguments);\n      };\n    g._v = '1.1.1';\n  })(window, document, window['_fs_namespace'], 'script', 'user');\n","export default () => {\n  window[window['_fs_namespace']] = {\n    identify: (...args) => ({ method: 'identify', args }),\n    setUserVars: (...args) => ({ method: 'setUserVars', args }),\n    event: (...args) => ({ method: 'event', args }),\n    shutdown: (...args) => ({ method: 'shutdown', args }),\n    restart: (...args) => ({ method: 'restart', args }),\n    log: (...args) => ({ method: 'log', args }),\n    consent: (...args) => ({ method: 'consent', args }),\n    identifyAccount: (...args) => ({ method: 'identifyAccount', args }),\n    clearUserCookie: (...args) => ({ method: 'clearUserCookie', args })\n  };\n};\n","import React from 'react';\nimport initFullStory from './fullstory-script';\nimport initMockFullStory from './mock-fullstory-script';\n\nconst canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\nconst includeFullStory =\n  process.env.NODE_ENV !== 'test' ? initFullStory : initMockFullStory;\n\nexport const getWindowFullStory = () => window[window['_fs_namespace']];\n\nexport const FullStoryAPI = (fn, ...args) => {\n  if (canUseDOM && getWindowFullStory()) {\n    return getWindowFullStory()[fn].apply(null, args);\n  }\n\n  return false;\n};\n\nexport const identify = (...args) => {\n  return FullStoryAPI('identify', ...args);\n};\n\nexport const shutdown = (...args) => {\n  return FullStoryAPI('shutdown', ...args);\n};\n\nexport const restart = (...args) => {\n  return FullStoryAPI('restart', ...args);\n};\n\nexport const setUserVars = (...args) => {\n  return FullStoryAPI('setUserVars', ...args);\n};\n\nexport const log = (...args) => {\n  return FullStoryAPI('log', ...args);\n};\n\nexport const getCurrentSessionUrl = (...args) => {\n  return FullStoryAPI('getCurrentSessionUrl', ...args);\n};\n\nexport const event = (...args) => {\n  return FullStoryAPI('event', ...args);\n};\n\nexport const consent = (...args) => {\n  return FullStoryAPI('consent', ...args);\n};\n\nexport const clearUserCookie = (...args) => {\n  return FullStoryAPI('clearUserCookie', ...args);\n};\n\nexport default class FullStory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { org, debug, script, host, namespace } = props;\n\n    if (!org || !canUseDOM) {\n      return;\n    }\n\n    if (!getWindowFullStory()) {\n      window['_fs_debug'] = debug || false;\n      window['_fs_host'] = host || 'fullstory.com';\n      window['_fs_script'] = script || 'edge.fullstory.com';\n      window['_fs_org'] = org;\n      window['_fs_namespace'] = namespace || 'FS';\n\n      includeFullStory();\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    if (!canUseDOM || !getWindowFullStory()) return false;\n\n    getWindowFullStory().shutdown();\n\n    delete window[window['_fs_namespace']];\n    delete window['_fs_debug'];\n    delete window['_fs_host'];\n    delete window['_fs_org'];\n    delete window['_fs_namespace'];\n    delete window['_fs_script'];\n  }\n\n  render() {\n    return false;\n  }\n}\n"],"names":["m","n","e","t","l","o","g","y","console","log","a","b","s","q","push","_api","createElement","async","crossOrigin","src","_fs_script","getElementsByTagName","parentNode","insertBefore","identify","i","v","uid","setUserVars","event","p","shutdown","restart","consent","arguments","length","identifyAccount","acctId","clearUserCookie","_w","apply","_v","window","document","args","method","canUseDOM","includeFullStory","process","env","NODE_ENV","initFullStory","initMockFullStory","getWindowFullStory","FullStoryAPI","fn","getCurrentSessionUrl","FullStory","props","org","debug","script","host","namespace","React","Component"],"mappings":"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"}