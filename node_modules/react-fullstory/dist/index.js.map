{"version":3,"file":"index.js","sources":["../src/fullstory-script.js","../src/mock-fullstory-script.js","../src/index.js"],"sourcesContent":["export default () =>\n  (function(m, n, e, t, l, o, g, y) {\n    if (e in m) {\n      if (m.console && m.console.log) {\n        m.console.log(\n          'FullStory namespace conflict. Please set window[\"_fs_namespace\"].'\n        );\n      }\n      return;\n    }\n    g = m[e] = function(a, b, s) {\n      g.q ? g.q.push([a, b, s]) : g._api(a, b, s);\n    };\n    g.q = [];\n    o = n.createElement(t);\n    o.async = 1;\n    o.crossOrigin = 'anonymous';\n    o.src = 'https://' + _fs_script + '/s/fs.js';\n    y = n.getElementsByTagName(t)[0];\n    y.parentNode.insertBefore(o, y);\n    g.identify = function(i, v, s) {\n      g(l, { uid: i }, s);\n      if (v) g(l, v, s);\n    };\n    g.setUserVars = function(v, s) {\n      g(l, v, s);\n    };\n    g.event = function(i, v, s) {\n      g('event', { n: i, p: v }, s);\n    };\n    g.shutdown = function() {\n      g('rec', !1);\n    };\n    g.restart = function() {\n      g('rec', !0);\n    };\n    g.log = function(a, b) {\n      g('log', [a, b]);\n    };\n    g.consent = function(a) {\n      g('consent', !arguments.length || a);\n    };\n    g.identifyAccount = function(i, v) {\n      o = 'account';\n      v = v || {};\n      v.acctId = i;\n      g(o, v);\n    };\n    g.clearUserCookie = function() {};\n    g._w = {};\n    y = 'XMLHttpRequest';\n    g._w[y] = m[y];\n    y = 'fetch';\n    g._w[y] = m[y];\n    if (m[y])\n      m[y] = function() {\n        return g._w[y].apply(this, arguments);\n      };\n    g._v = '1.1.1';\n  })(window, document, window['_fs_namespace'], 'script', 'user');\n","export default () => {\n  window[window['_fs_namespace']] = {\n    identify: (...args) => ({ method: 'identify', args }),\n    setUserVars: (...args) => ({ method: 'setUserVars', args }),\n    event: (...args) => ({ method: 'event', args }),\n    shutdown: (...args) => ({ method: 'shutdown', args }),\n    restart: (...args) => ({ method: 'restart', args }),\n    log: (...args) => ({ method: 'log', args }),\n    consent: (...args) => ({ method: 'consent', args }),\n    identifyAccount: (...args) => ({ method: 'identifyAccount', args }),\n    clearUserCookie: (...args) => ({ method: 'clearUserCookie', args })\n  };\n};\n","import React from 'react';\nimport initFullStory from './fullstory-script';\nimport initMockFullStory from './mock-fullstory-script';\n\nconst canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\nconst includeFullStory =\n  process.env.NODE_ENV !== 'test' ? initFullStory : initMockFullStory;\n\nexport const getWindowFullStory = () => window[window['_fs_namespace']];\n\nexport const FullStoryAPI = (fn, ...args) => {\n  if (canUseDOM && getWindowFullStory()) {\n    return getWindowFullStory()[fn].apply(null, args);\n  }\n\n  return false;\n};\n\nexport const identify = (...args) => {\n  return FullStoryAPI('identify', ...args);\n};\n\nexport const shutdown = (...args) => {\n  return FullStoryAPI('shutdown', ...args);\n};\n\nexport const restart = (...args) => {\n  return FullStoryAPI('restart', ...args);\n};\n\nexport const setUserVars = (...args) => {\n  return FullStoryAPI('setUserVars', ...args);\n};\n\nexport const log = (...args) => {\n  return FullStoryAPI('log', ...args);\n};\n\nexport const getCurrentSessionUrl = (...args) => {\n  return FullStoryAPI('getCurrentSessionUrl', ...args);\n};\n\nexport const event = (...args) => {\n  return FullStoryAPI('event', ...args);\n};\n\nexport const consent = (...args) => {\n  return FullStoryAPI('consent', ...args);\n};\n\nexport const clearUserCookie = (...args) => {\n  return FullStoryAPI('clearUserCookie', ...args);\n};\n\nexport default class FullStory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { org, debug, script, host, namespace } = props;\n\n    if (!org || !canUseDOM) {\n      return;\n    }\n\n    if (!getWindowFullStory()) {\n      window['_fs_debug'] = debug || false;\n      window['_fs_host'] = host || 'fullstory.com';\n      window['_fs_script'] = script || 'edge.fullstory.com';\n      window['_fs_org'] = org;\n      window['_fs_namespace'] = namespace || 'FS';\n\n      includeFullStory();\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    if (!canUseDOM || !getWindowFullStory()) return false;\n\n    getWindowFullStory().shutdown();\n\n    delete window[window['_fs_namespace']];\n    delete window['_fs_debug'];\n    delete window['_fs_host'];\n    delete window['_fs_org'];\n    delete window['_fs_namespace'];\n    delete window['_fs_script'];\n  }\n\n  render() {\n    return false;\n  }\n}\n"],"names":["m","n","e","t","l","o","g","y","console","log","a","b","s","q","push","_api","createElement","async","crossOrigin","src","_fs_script","getElementsByTagName","parentNode","insertBefore","identify","i","v","uid","setUserVars","event","p","shutdown","restart","consent","arguments","length","identifyAccount","acctId","clearUserCookie","_w","apply","_v","window","document","args","method","canUseDOM","includeFullStory","process","env","NODE_ENV","initFullStory","initMockFullStory","getWindowFullStory","FullStoryAPI","fn","getCurrentSessionUrl","FullStory","props","org","debug","script","host","namespace","React","Component"],"mappings":"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"}